<html>
  <head>
    <title>Dubai Expo - Single Screen</title>
    <meta name="description" content="Multiple Markers - A-Frame School">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/0.6.0/aframe-master.min.js"></script>

    <style type="text/css">
      #video-permission {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: white;
          z-index: 10000;
          display: none;
      }
      #video-permission-button {
        position: fixed;
        top: calc(50% - 1em);
        left: calc(50% - 60px);
        width: 120px;
        height: 2em;
      }
    </style>

    <script>
      var AVideoPlayer = function() {

      this._mobileFriendly = function() {
        var vid1Src = document.getElementById("adv_video_src");
        var vid2Src = document.getElementById("mon_video_src");
        if (AFRAME.utils.device.isMobile()) {
          var that = this;
          let video_permission        = document.getElementById('video-permission');
          let video_permission_button = document.getElementById('video-permission-button');

          video_permission.style.display = 'block';
          video_permission_button.addEventListener("click", function() {
            video_permission.style.display = 'none';
            vid1Src.play();
            vid2Src.play();
          }, false);
        }else{
          vid1Src.play();
          vid2Src.play();
        }

      }

      this.init = function() {
        this._mobileFriendly();
      }
      this.init();
     }

      </script>

  </head>
  <body>
    <div id="video-permission">
     <button id="video-permission-button">Allow VR video</button>
   </div>
      <a-scene>
        <a-assets>

          <img id="skynew" src="datasinglescreen/sky/sky.jpg">
          <video id="adv_video_src" src="datasinglescreen/advertisement.mp4" ></video>
          <video id="mon_video_src" src="datasinglescreen/monitoring.mp4" /></video>
          <!--<a-asset-item id="robot-obj" src="datasinglescreen/robot/robot.obj"></a-asset-item>
      		<a-asset-item id="robot-mtl" src="datasinglescreen/robot/robot.mtl"></a-asset-item>
          <a-asset-item id="laptop-obj" src="datasinglescreen/laptop/laptop.obj"></a-asset-item>
      		<a-asset-item id="laptop-mtl" src="datasinglescreen/laptop/laptop.mtl"></a-asset-item> -->
          <img id="iphone" src="datasinglescreen/iphone.png">
          <img id="ipad" src="datasinglescreen/ipad.png">
          <img id="ticketscan" src="datasinglescreen/ticketscan.png">
          <img id="smartwatch" src="datasinglescreen/smartwatch.png">
          <img id="accdevice" src="datasinglescreen/accdevice.png">
          <img id="atm" src="datasinglescreen/atm.png">
          <img id="posstation" src="datasinglescreen/posstation.png">
          <img id="robot" src="datasinglescreen/robot.png">
          <img id="macbook" src="datasinglescreen/macbook.png">
          <img id="coffeemachine" src="datasinglescreen/coffeemachine.png">
        </a-assets>
        <a-sky src="#skynew"></a-sky>

        <a-image src="#robot" width="5" height="5"  position="8 0 -14"  >
          <a-animation attribute="rotation"
             dur="10000"
             fill="forwards"
             to="0 360 0"
             repeat="indefinite"></a-animation></a-image>

         <a-text font="kelsonsans" value="Welcome" width="6" position="-0.5 2.8 -4"  align="center" color="#ff9933"></a-text>
          <a-text font="kelsonsans" value="To" width="6" position="-0.5 2.5 -4"   align="center" color="#ff9933"></a-text>
          <a-text font="kelsonsans" value="Dubai Expo Test Lab" width="6" position="-0.5 2.2 -4"   align="center" color="#ff9933"></a-text>

          <a-text font="kelsonsans" value="Advertisement Area" width="3" position="3 2.5 0" rotation="0 -95 0" align="center"  color="#000066"></a-text>
          <a-video src="#adv_video_src" width="0.7" height="0.39" position="1.3 1.7 0"  id="adv_video"  rotation="0 -90 0" loot="true"></a-video>
          <a-image src="#atm" width="15" height="7" rotation="0 0 0" position="15 0 -9"   ></a-image>

          <!-- <a-entity obj-model="obj: #atm-obj; mtl: #atm-mtl"  scale="0.3 0.3 0.3" position="9 0 -4" rotation="0 0 0"></a-entity>

          <a-entity obj-model="obj: #robot-obj; mtl: #robot-mtl"  scale="0.5 0.5 0.5" position="6 0 -4" rotation="0 -45 0"> -->
          <!--  <a-animation attribute="rotation"
             dur="10000"
             fill="forwards"
             to="0 360 0"
             repeat="indefinite"></a-animation> -->
          <!-- </a-entity> -->
          <!-- Digital Test Station -->

          <a-text font="kelsonsans" value="Monitoring Area" width="3" position="-3 2 0" rotation="0 95 0" align="center"  color="#000066"></a-text>
          <a-video src="#mon_video_src" width="1.75" height="0.75" rotation="0 95 0" position="-5 1.6 0" loot="true"></a-video>

          <a-text font="kelsonsans" value="Digital Test Station" width="1.5" position="-1.5 1.7 -1" rotation="0 45 0" align="center"  color="#000066"></a-text>
          <a-image src="#iphone" width="0.25" height="0.25" rotation="0 90 0" position="-2 1.3 -0.5"   ></a-image>
          <a-image src="#ipad" width="0.25" height="0.25" rotation="0 90 0" position="-1 1.4 -0.5"   ></a-image>
        <!--  <a-entity obj-model="obj: #laptop-obj; mtl: #laptop-mtl"  scale="0.15 0.15 0.15"  position="-1.2 1.2 -2" rotation="0 90 0"></a-entity> -->
        <a-image src="#macbook" width="2" height="1"  position="-2.8 0.9 -4"  ></a-image>

         <a-text font="kelsonsans" width="65" value="Access Station" width="100" position="-56.752 7 48.316" rotation="0 90 0" align="center"  color="#000066" ></a-text>
          <a-image src="#ticketscan" width="10" height="10" rotation="0 90 0" position="-30.752 -5 39.316"  ></a-image>
          <a-image src="#accdevice" width="11" height="11" rotation="-15 120 0" position="-58.752 -5 39.316"  ></a-image>
         <a-image src="#smartwatch" width="5" height="5" rotation="-15 90 0" position="-47.752 -5 20.316"  ></a-image>

         <a-text font="kelsonsans"  value="POS Station" width="35" position="12.752 7 25.316" rotation="0 180 0" align="center" color="#000066"></a-text>
         <a-image src="#posstation" width="7" height="7"  position="7.752 0 8" rotation="0 0 0" ></a-image>
         <a-image src="#coffeemachine" width="3" height="4"  position="1 0 12" rotation="0 0 0" ></a-image>

        <a-entity camera="userHeight: 1.6" look-controls wasd-controls-enabled mouse-cursor>
            <a-entity position="0 0 -3" scale="0.2 0.2 0.2"  geometry="primitive: ring; radiusOuter: 0.20;radiusInner: 0.10;" material="color: #990000; shader: flat" cursor="maxDistance: 30; fuse: true">
                <a-animation begin="click" easing="ease-in" attribute="scale" fill="backwards" from="0.1 0.1 0.1" to="1 1 1" dur="150"></a-animation>
                <a-animation begin="fusing"  easing="ease-in" attribute="scale" fill="forwards" from="1 1 1" to="0.2 0.2 0.2" dur="1500"></a-animation>
            </a-entity>
        </a-entity>
      </a-scene>
    </body>
    <script>
    var videoPlayer = new AVideoPlayer();
    </script>
</html>
